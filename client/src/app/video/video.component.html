<div [style.display]="visible ? 'block' : 'none'">
  <app-reporting></app-reporting>
  <div class="row">
    <mat-card class="mx-auto hide-background mat-elevation-z0">
      <mat-card-title class="mat-elevation-z8">
        {{ videoFeeder.camName + " (" + videoFeeder.streamDescr + ")" }}
      </mat-card-title>
    </mat-card>
  </div>
  <div>
    <video #video [ngClass]="{'multi': multi}" class="video" style="visibility: visible">
    </video>
    <div *ngIf="isfmp4" class="latency-limit-selector">
      <div>
        <label [ngClass]="{'latency-chasing': audioFeeder.isLatencyChasing}" *ngIf="stream?.audio"
               matTooltip="Please increase upper latency limit if this flashes red"
               matTooltipClass="tooltip">
          <mat-icon (click)="toggleMuteAudio()">{{ audioFeeder.isMuted ? 'volume_off' : 'volume_up' }}</mat-icon>
        </label>
        <label *ngIf="videoFeeder.backchannelAudioSupported" [matTooltip]="audioButtonTooltip()"
               matTooltipClass="tooltip">
          <mat-icon
            [ngClass]="{'audio-out-inactive': !utilsService.speakActive && !audioToggle && !utilsService.isGuestAccount, 'audio-out-active':  utilsService.speakActive && audioToggle && !utilsService.isGuestAccount, 'audio-out-disabled': (utilsService.speakActive && !audioToggle) || utilsService.isGuestAccount}"
            (click)="toggleAudioOut()">{{ audioToggle ? 'mic' : 'mic_off' }}
          </mat-icon>
        </label>
        <select *ngIf="videoFeeder.backchannelAudioSupported" [disabled]="utilsService.speakActive"
                [matTooltip]="audioInputSelectorTooltip()" matTooltipClass="tooltip"
                [(ngModel)]="selectedDeviceId" (change)="setAudioInput()">
          <option *ngFor="let device of mediaDevices | audioInput" [value]="device.deviceId">{{ device.label }}</option>
        </select>
        <label [ngClass]="{'latency-chasing': videoFeeder.isLatencyChasing}">
          <mat-icon>timer</mat-icon>
        </label>
        <select *ngIf="videoFeeder" matTooltip="Set upper latency chasing limit. Please increase upper latency limit if this flashes red" matTooltipClass="tooltip"
                style="width: 90px;" #latencyLimitSelect [(ngModel)]="buffering_sec"
                (change)="videoFeeder.setlatencyLim(buffering_sec);audioFeeder.setlatencyLim(buffering_sec)">
          <option value="0.4">0.4</option>
          <option value="0.6">0.6</option>
          <option value="0.8"> 0.8</option>
          <option value="1">1.0</option>
          <option value="1.2">1.2</option>
          <option value="1.4">1.4</option>
          <option value="1.6">1.6</option>
          <option value="1.8">1.8</option>
          <option value="2">2.0</option>
        </select>
        <label matTooltip="Set full screen" matTooltipClass="tooltip">
          <mat-icon (click)="setFullScreen()">fullscreen</mat-icon>
        </label>
      </div>
      <audio #audio style="width: 0; height: 0"> <!-- Invisible audio element -->
      </audio>
    </div>
  </div>
</div>
